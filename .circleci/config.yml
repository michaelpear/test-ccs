version: 2
jobs:
    build:
      working_directory: /tmp/my-build
      # Custom docker container
      docker:
       - image: michaelpear/ccsv7build:v1
#Steps just checkout and run build commands
      steps:
       - checkout
       - run:
          shell: /bin/bash
          name: CCS-Build
          command: |
            ls -ltr
            echo Running Import
            mkdir -p /tmp/ccsworkspace
            /opt/ti/ccsv7/eclipse/eclipse -noSplash -clean -clearPersistedState
            /opt/ti/ccsv7/eclipse/eclipse -noSplash -consoleLog -data "/tmp/ccsworkspace" -application com.ti.ccstudio.apps.projectCreate -ccs.name newProject -ccs.device com.ti.ccstudio.deviceModel.C2000.GenericC28xxDevice
            /opt/ti/ccsv7/eclipse/eclipse  -noSplash  -consoleLog -data "/tmp/ccsworkspace" -application com.ti.ccstudio.apps.projectImport -ccs.location "/tmp/my-build" -ccs.copyIntoWorkspace
            /opt/ti/ccsv7/eclipse/eclipse  -noSplash -consoleLog -data "/tmp/ccsworkspace" -application com.ti.ccstudio.apps.projectBuild -ccs.workspace -ccs.buildType full
            ls -ltr /tmp/ccsworkspace
            ls -ltr /tmp/my-build

